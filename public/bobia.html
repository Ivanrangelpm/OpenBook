<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenBook | RecomendAI</title>


    <script src="../js/sessao.js"></script>
    <script src="../js/alerta.js"></script>

    <link rel="shortcut icon" href="./assets/imgs/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="css/dashboards.css">
    <link rel="stylesheet" href="css/estilo.css">
    <link rel="stylesheet" href="css/bobia.css">
</head>
<!--onload="validarSessao()"-->
<body onload="validarSessao()">

    <div class="header">
        <a href="index.html">
          <img src="./assets/imgs/logoExtendedCopy.png" alt="logo" class="logo">
        </a>
          <ul class="navbar">
            <li>
              <a href="dashboard/livros.html">Livros</a>
            </li>
            <li class="paginaAtual">
              <a class="paginaAtual href="bobia.html">recomendAI</a>
            </li>
            <li>
              <a href="dashboard/forum.html">Forum</a>
            </li>
            <li>|</li>
            <li >
              <a href="dashboard/usuario.html">
                <div class="hello">
                  <img id="fotoPerfil" alt="" style="display: none;">
                  <img class="imgPerf" 
                      id="imgPerfil"
                      src="https://static.vecteezy.com/ti/vetor-gratis/p1/9734564-default-avatar-profile-icon-of-social-media-user-vetor.jpg"
                      alt="">
                  <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
                </div>
              </a>
            </li>
            <li>
              <a>
                <div class="botaoSair" onclick="limparSessao()">
                  <h3 style="color: #aa7744;" class="h3BotaoSair">Sair</h3>
              </div>
              </a>
            </li>
          </ul>
      </div>



        <div id="containerRecomendAI">
            
                <h1 class="tituloRecomendai">RecomendAI! Seu novo jeito de descobrir livros</h1>
                <div id="resposta"></div>

                <div id="impBox" class="inputBox">
                    <div class="inputDiv">
                        <input id="pergunta" type="text" class="inp_comentario" placeholder="Digite sua pergunta">
                        <button onclick="gerarResposta()" class="btnIcon" id="btnIcon">
                            <img src="assets/imgs/enviar.png" class="imgEnviar">
                        </button>
                    </div>
                </div>

                
          </div> 



    <footer>
        <div class="developers">
          <h3>OpenBook foi desenvolvida por </h3>
          <ul>
            <li>Ivan Rangel Pestana Marcolin <br> ivan.marcolin@sptech.school</li>
          </ul>
        </div>
        <div>
          
        </div>
        <div class="meioFooter">
          <img src="./assets/imgs/bookGif.webp" class="logo" />
          <p>OpenBook © 2024. Todos os direitos reservados.</p>    
        </div>
        <div class="contact">
          <h3>Contato:</h3>
          <ul>
            <li>openBook@gmail.com</li>
            <li>+55 11 99123-9899</li>
          </ul>
          <br>
          <h3>Endereço</h3>
          <ul>
            <li>Rua Haddook Lobo 565</li>
          </ul>
        </div>
        
      </footer>
    <script>


        /*
        Alterar essa função para concatenar uma unica variavel texto que tenha: genero do usuario e os livros que ele já leu 
        EXEMPLO: Me recomende um livro sabendo que eu costumo ler suspense, romance e terror com base nas proximas palavras: (input do usuario),
        mas não me recomende livro (lista dos nomes dos livros que o usuario já leu) XXX, YYY e ZZZ pois eu já li esses livros
        */

        async function gerarResposta() {
            const pergunta = document.getElementById('pergunta').value;

            const response = await fetch('/perguntar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ pergunta })
            });

            const data = await response.json();
            console.log(data)

            resposta.style.display = 'block';
            document.getElementById('resposta').innerText = data.resultado;
        }

    </script>

</body>

</html>